[gd_scene load_steps=20 format=2]

[ext_resource path="res://shaders/lightning.png" type="Texture" id=1]
[ext_resource path="res://shaders/Moon_1k.png" type="Texture" id=2]
[ext_resource path="res://level/sky_handler.gd" type="Script" id=3]
[ext_resource path="res://utils/world/World.cs" type="Script" id=4]
[ext_resource path="res://shaders/Sky.shader" type="Shader" id=5]
[ext_resource path="res://level/map.tscn" type="PackedScene" id=6]
[ext_resource path="res://addons/SIsilicon.vfx.godrays/GodRays.gd" type="Script" id=7]
[ext_resource path="res://icon.png" type="Texture" id=8]
[ext_resource path="res://shaders/Clouds.shader" type="Shader" id=9]
[ext_resource path="res://shaders/noise.png" type="Texture" id=10]

[sub_resource type="PanoramaSky" id=10]
panorama = ExtResource( 8 )

[sub_resource type="Environment" id=2]
resource_local_to_scene = true
background_mode = 2
background_sky = SubResource( 10 )
background_sky_orientation = Basis( -0.536431, 0, -0.843944, 0, 1, 0, 0.843944, 0, -0.536431 )
background_color = Color( 1, 1, 1, 1 )
fog_color = Color( 1, 1, 1, 1 )
tonemap_mode = 3
tonemap_exposure = 1.3
tonemap_white = 5.5
ssao_enabled = true
ssao_radius = 2.0
ssao_intensity = 2.0
ssao_quality = 2
ssao_blur = 2
dof_blur_near_distance = 4.0
adjustment_saturation = 0.75

[sub_resource type="ShaderMaterial" id=3]
shader = ExtResource( 9 )
shader_param/WIND = Vector3( 0.1, 0, 0 )
shader_param/SUN_POS = Vector3( 0, -0.866025, 0.5 )
shader_param/SIZE = 2.0
shader_param/SOFTNESS = 1.0
shader_param/COVERAGE = 0.55
shader_param/HEIGHT = 0.35
shader_param/THICKNESS = 15.0
shader_param/ABSORPTION = 1.25
shader_param/STEPS = 25
shader_param/Noise = ExtResource( 10 )

[sub_resource type="ImageTexture" id=4]
flags = 4
lossy_quality = 1.0
flags = 4
size = Vector2( 1024, 1024 )

[sub_resource type="ViewportTexture" id=5]
viewport_path = NodePath("clouds_viewport")

[sub_resource type="Gradient" id=6]
offsets = PoolRealArray( 0.00645161, 0.341935, 1 )
colors = PoolColorArray( 0.968627, 0.247059, 0.0784314, 1, 0.239216, 0.635294, 0.984314, 1, 0.109804, 0.352941, 1, 1 )

[sub_resource type="GradientTexture" id=7]
gradient = SubResource( 6 )

[sub_resource type="ShaderMaterial" id=8]
resource_local_to_scene = true
shader = ExtResource( 5 )
shader_param/SCATERRING = false
shader_param/SUN_POS = Vector3( 0, 0.866025, -0.5 )
shader_param/MOON_POS = Vector3( 0, -0.866025, 0.5 )
shader_param/MOON_TEX_POS = Vector3( 0, -0.965926, 0.258819 )
shader_param/MOON_PHASE = 0.0
shader_param/moon_radius = 0.1
shader_param/sun_radius = 0.04
shader_param/attenuation = 1.0
shader_param/LIGHTING_STRENGTH = Vector3( 0, 0, 0 )
shader_param/LIGHTTING_POS = Vector3( 2, 2, 2 )
shader_param/sky_tone = 3.5
shader_param/sky_density = 0.5
shader_param/sky_rayleig_coeff = 1.0
shader_param/sky_mie_coeff = 0.5
shader_param/multiScatterPhase = 0.0
shader_param/anisotropicIntensity = 1.5
shader_param/color_sky = Color( 0.25, 0.5, 1, 1 )
shader_param/moon_tint = Color( 1, 0.7, 0.35, 1 )
shader_param/clouds_tint = Color( 1, 1, 1, 1 )
shader_param/MOON = ExtResource( 2 )
shader_param/cloud_env_texture = SubResource( 5 )
shader_param/lighting_texture = ExtResource( 1 )
shader_param/sky_gradient_texture = SubResource( 7 )

[sub_resource type="ImageTexture" id=9]
flags = 0
lossy_quality = 1.0
flags = 0
size = Vector2( 1024, 1024 )

[node name="world" type="Node"]
script = ExtResource( 4 )

[node name="sky_handler" type="Spatial" parent="."]
script = ExtResource( 3 )
sky_view_path = NodePath("../../world/sky_viewport")
env_path = NodePath("../../world/WorldEnvironment")
sun_path = NodePath("../../world/Sun_Moon")
clouds_view_path = NodePath("../../world/clouds_viewport")
sky_tex_path = NodePath("../../world/sky_viewport/sky_texture")
clouds_tex_path = NodePath("../../world/clouds_viewport/clouds_texture")
color_sky = Color( 0.647059, 0.839216, 0.945098, 1 )
hours = 14

[node name="Sun_Moon" type="DirectionalLight" parent="."]
transform = Transform( -1, 7.57104e-08, -4.37114e-08, 0, 0.5, 0.866025, 8.74228e-08, 0.866025, -0.5, 0, 56.635, -60.1757 )
light_color = Color( 0.972549, 0.941176, 0.870588, 1 )
light_energy = 2.0
light_specular = 1.0
shadow_enabled = true
__meta__ = {
"_editor_description_": ""
}

[node name="players" type="Node" parent="."]

[node name="vehicles" type="Node" parent="."]

[node name="properties" type="Node" parent="."]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 2 )
__meta__ = {
"_editor_description_": ""
}

[node name="clouds_viewport" type="Viewport" parent="."]
size = Vector2( 1024, 1024 )
transparent_bg = true
render_target_update_mode = 3
__meta__ = {
"_editor_description_": ""
}

[node name="clouds_texture" type="Sprite" parent="clouds_viewport"]
material = SubResource( 3 )
texture = SubResource( 4 )
centered = false
__meta__ = {
"_editor_description_": ""
}

[node name="sky_viewport" type="Viewport" parent="."]
size = Vector2( 1024, 1024 )
handle_input_locally = false
render_target_update_mode = 3
__meta__ = {
"_editor_description_": ""
}

[node name="sky_texture" type="Sprite" parent="sky_viewport"]
material = SubResource( 8 )
texture = SubResource( 9 )
centered = false
__meta__ = {
"_editor_description_": ""
}

[node name="GodRays" type="Spatial" parent="."]
script = ExtResource( 7 )
__meta__ = {
"_editor_description_": ""
}
exposure = 1.0
attenuation = 3.0
light_size = 0.2

[node name="map_holder" type="Node" parent="."]

[node name="map" parent="map_holder" instance=ExtResource( 6 )]
